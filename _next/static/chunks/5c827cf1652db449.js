(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20231,e=>{"use strict";e.s(["default",()=>d],20231);var t=e.i(43476),s=e.i(71645);function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class i{move(e,t,s){let r=Math.hypot(e,t)||1;this.x+=e/r*this.speed*s,this.y+=t/r*this.speed*s}constructor(e=0,t=0,s=120){r(this,"x",void 0),r(this,"y",void 0),r(this,"speed",void 0),r(this,"hp",void 0),r(this,"inventory",void 0),this.x=e,this.y=t,this.speed=s,this.hp=100,this.inventory=[]}}class a{update(e,t){let s=!!e.right-!!e.left,r=!!e.down-!!e.up;(s||r)&&this.player.move(s,r,t)}constructor(){r(this,"player",new i(400,350,150))}}var n=e.i(33901);class o extends n.Scene{preload(){this.load.image("tiles","/assets/tiles/tuxmon-sample-32px-extruded.png"),this.load.tilemapTiledJSON("map","/assets/maps/tuxemon-town.json")}create(){let e=this.make.tilemap({key:"map"});console.debug("map.tilesets:",e.tilesets.map(e=>e.name));let t=e.addTilesetImage("tuxmon-sample-32px-extruded","tiles");if(!t&&e.tilesets.length>0){let s=e.tilesets[0].name;console.warn("Tileset 'tuxmon-sample-32px' não encontrado no map.json — usando '".concat(s,"' como fallback")),t=e.addTilesetImage(s,"tiles")}if(!t)throw Error("Tileset não encontrado: verifique o nome do tileset no JSON e a chave do asset carregado.");e.createLayer("Below Player",t,0,0);let s=e.createLayer("World",t,0,0);if(e.createLayer("Above Player",t,0,0),!s)throw Error("WorldLayer não retornado por map.createLayer");s.setCollisionByProperty({collides:!0}),this.gs=new a,this.player=this.physics.add.sprite(this.gs.player.x,this.gs.player.y,"assets","weirdsquare"),this.physics.add.collider(this.player,s),this.cursors=this.input.keyboard.createCursorKeys(),this.cameras.main.startFollow(this.player),this.cameras.main.setLerp(.15,.15),this.gs.player.x=this.player.x,this.gs.player.y=this.player.y}update(e,t){var s,r,i,a;if(!this.player||!this.player.body)return;let n=this.speed,o=0,l=0;(null==(s=this.cursors.left)?void 0:s.isDown)?o=-n:(null==(r=this.cursors.right)?void 0:r.isDown)&&(o=n),(null==(i=this.cursors.up)?void 0:i.isDown)?l=-n:(null==(a=this.cursors.down)?void 0:a.isDown)&&(l=n),this.player.setVelocity(o,l);let c=this.player.body;0!==c.velocity.x&&0!==c.velocity.y&&c.velocity.normalize().scale(n),this.gs.player.x=this.player.x,this.gs.player.y=this.player.y}constructor(){super({key:"rpg"}),r(this,"gs",void 0),r(this,"player",void 0),r(this,"cursors",void 0),r(this,"background",void 0),r(this,"accumulator",0),r(this,"fixedDt",1/60),r(this,"speed",150)}}let l={type:Phaser.WEBGL,width:800,height:600,scene:[o],physics:{default:"arcade",arcade:{gravity:{x:0,y:0}}}},c=new n.Events.EventEmitter,u=(0,s.forwardRef)(function(e,r){let{currentActiveScene:i}=e,a=(0,s.useRef)(null);return(0,s.useLayoutEffect)(()=>{null===a.current&&(a.current=new n.Game({...l,parent:"game-container"}),"function"==typeof r?r({game:a.current,scene:null}):r&&(r.current={game:a.current,scene:null}));return()=>{a.current&&(a.current.destroy(!0),null!==a.current&&(a.current=null))}},[r]),(0,s.useEffect)(()=>(c.on("current-scene-ready",e=>{i&&"function"==typeof i&&i(e),"function"==typeof r?r({game:a.current,scene:e}):r&&(r.current={game:a.current,scene:e})}),()=>{c.removeListener("current-scene-ready")}),[i,r]),(0,t.jsx)("div",{id:"game-container"})}),d=function(){let[e,r]=(0,s.useState)(!0),i=(0,s.useRef)(null);return(0,t.jsx)("div",{id:"app",children:(0,t.jsx)(u,{ref:i,currentActiveScene:e=>{r("MainMenu"!==e.scene.key)}})})}},17494,e=>{e.n(e.i(20231))}]);